---
mandatory: True
question: Welcome to the SAAS consent application
subquestion: |
  This application will direct you through the pathways of consent and suggest the most appropriate action based on your input.
  
  Aspects of this application are based on the assumption that paramedics are considered medical practitioners. The application will inform you when this distinction is important.
  
  The application's advice is not legal advice, by clicking continue you are agreeing not to treat it as such.
buttons:
  - "I accept and want to continue": continue
  - "I do not accept": exit
---
mandatory: True
code: |
  if PatientAge and APNOdecision.any_true():
    Appadult
  elif PatientAge:
    AppMentalHealth
  else:
    Appchild
---
question: Is the patient under the age of 16?
noyes: PatientAge
---
event: Appadult
Question: Consent recommendation
subquestion: |
  ${ final }.
  
  Thank you for using this consent app.
buttons:
  - "Restart": restart
  - "Exit": exit
---
event: AppMentalHealth
Question: Consent recommendation
subquestion: |
  ${ decisive }.
    
  Thank you for using this consent app.
buttons:
  - "Restart": restart
  - "Exit": exit
---
event: Appchild
Question: Consent recommendation
subquestion: |
  ${ ultimate }.
   
  Thank you for using this consent app.
buttons:
  - "Restart": restart
  - "Exit": exit
---
code: | 
  if APNOdelay:
    final = 'It is recommended that you delay the treatment until the patient regains decision-making capacity'
  elif APNOACDdecision_maker:
    final = 'It is recommended that you seek the substitute decision makers consent'
  elif APNOACDinstructions:
    final = 'It is recommended that you follow the instructions set forth in the patients Advance Care Directive'
  elif APNOperson_responsible.any_true():
    final = 'It is recommended that you seek the consent of the person responsible'
  elif MHIllness and MHHarm:
    final = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property'
  elif MHIllness and MHRequire:
    final = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property'
  else: 
    final = 'It is recommended that you contact SAAS legal department IF there is the need to apply to SACAT for consent'
---
question: Is the decision making ability of the patient impaired?
Subquestion: |
  Please select any of the following if they apply to the patient:
Fields: 
  - no label: APNOdecision
    datatype: checkboxes
    choices:
      - The patient is **incapable of understanding information** relevant to the decision, including consequences of the decision (not information of a techincal or trivial nature)
      - The patient is **incapable of retaining information** for at least a short amount of time
      - The patent is** incapable of using the information** in making the decision
      - The patient is **incapable of communicating** their decision
      - The patient is **comatose or otherwise unconscious**
---
question: Can the decision be delayed until the patient regains decision-making capacity?
yesno: APNOdelay
---
question: Advance Care Directive 
subquestion: |
  Does the patient have an Advance Care Directive appointing a Substitute Decision-Maker?
  
  *EG: Medical Agent or Enduring Guardian*
yesno: APNOACDdecision_maker
---
question: Advance Care Directive 
subquestion: |
  Does the patient have an Advance Care Directive with **relevant instructions**?
yesno: APNOACDinstructions
---
question: Is there a *Person Responsible* that can be contacted?
subquestion: |
  A *Person Responsible* is defined by the following list, select any that are available:
fields:
  - no label: APNOperson_responsible
    datatype: checkboxes 
    choices: 
      - Guardian
      - Spouse/Domestic Partner
      - Family member by blood or marriage or adoption 
      - Adult friend
      - Adult charged with overseeing the day-to-day care of the person
---
code: |
  if MHConsent:
    decisive = 'It is recommended that you administer medical treatment'
  elif MHIllness and MHHarm:
    decisive = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property'
  elif MHIllness and MHRequire:
    decisive = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property'
  else: 
    decisive = 'It is recommended that you do not administer medical treatment'
---
question: Does the patient consent to treatment?
yesno: MHConsent
---
question: Does the patient appear to have a mental illness?
subquestion: |
  *A mental illness is an illness or disorder of the mind*.
  
  What does NOT constitute a mental illness:

  - Political opinion or belief 
  - Religious opinion or belief 
  - Philosophy
  - Sexual preference or sexual orientation 
  - Political, religious, sexual activity or sexual promiscuity 
  - Immoral conduct 
  - Development disability of mind
  - Alcohol or drug intake 
  - Anti-social behaviour 
  - Economic or social status
  - Membership of a particular cultural or racial group

  NOTE: Serious or permanent physiological, biochemical or psychological impairment as a result of intake of alcohol or drugs **CAN** be an **INDICATION** of a mental illness.
yesno: MHIllness
---
question: Does it  appear that the patient has a mental illness **AND** has caused, or there is a significant risk of causing harm to themselves, others or property?
yesno: MHHarm
---
question: Does the patient otherwise require medical treatment?
yesno: MHRequire
---
code: |
  if CPParConsent:
    ultimate = 'It is recommended that you administer medical treatment'
  elif CPNecessity:
    ultimate = 'It is recommended that you administer medical treatment'
  elif CPChildConsent and CPRisks and CPInterest and CPSecondOpinion:
    ultimate = 'It is recommended that you administer medical treatment'
  elif MHIllness and MHHarm:
    ultimate = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property'
  elif MHIllness and MHRequire:
    ultimate = 'A paramedic can detain the patient, transport the patient from place to place, restrain the patient or use force as seen reasonable in the circumstances, restrain the person and otherwise use force to the person as "reasonably required" in the circumstances, enter and remain in a place where the paramedic "reasonably suspects" the person may be found, search the persons clothing or possessions and take possession of anything in the persons possession that the person may use to cause harm to: a) themselves, b) others or c) property' 
  else: 
    ultimate = 'It is recommended that you do not administer medical treatment'
---
question: Does the parent or guardian of the child consent to the medical treatment?
yesno: CPParConsent
---
question: Is the medical treatment necessary to preserve the child's life, health or well-being?
yesno: CPNecessity
---
question: Does the child consent to the medical treatment?
yesno: CPChildConsent
---
question: Are you of the opinion that the child is capable of understanding the nature, consequences and risks of the medical treatment?
yesno: CPRisks
---
question: Are you of the opinion that the medical treatment in the best interest of the child's health and well-being?
yesno: CPInterest
---
question: Are those opinions supported by the written opinion of at least one other medical practitioner, who personally examined the child before administering medical treatment?
yesno: CPSecondOpinion
---