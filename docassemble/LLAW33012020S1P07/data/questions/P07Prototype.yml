---
#adult patient, determining if their decision making ability is impaired.
#not an emergency
#the prefix of each field is represented by Adult Patient (AP), NO emergency (NO), followed by something relevant to the question. Hence APNOdecision/APNOdelay/APNOACDdecision.
question: Is the decision making ability of the patient impaired?
Subquestion: |
  Please select any of the following if they apply to the patient:
Fields: 
  - no label: APNOdecision
    datatype: checkboxes
    choices:
      - The patient is **incapable of understanding information** relevant to the decision, including consequences of the decision (not information of a techincal or trivial nature)
      - The patient is **incapable of retaining information** for at least a short amount of time
      - The patent is** incapable of using the information** in making the decision
      - The patient is **incapable of communicating** their decision
      - The patient is **comatose or otherwise unconscious**
---
#Adult patient, determining if decision can be delayed
#not an emergency
question: Can the decision be delayed until the patient regains decision-making capacity?
yesno: APNOdelay
---
#Adult patient, determining if the patient has an ACD with substitute decision maker
#not an emergency
question: Advance Care Directive 
subquestion: |
  Does the patient have an Advance Care Directive appointing a Substitute Decision-Maker?
  *EG: Medical Agent or Enduring Guardian*
yesno: APNOACDdecision
---
#Adult patient, determining if the patient has an ACD with relevant instructions
#not an emergency
question: Advance Care Directive 
subquestion: |
  Does the patient have an Advance Care Directive with relevant instructions **but *no* appointed Substitute Decision-Maker?**
#The section above in bold is how it is phrased in the legislation, but perhaps we want to rephrase it to something more layman?
yesno: APNOACDinstructions
---
#Adult patient, determining if a person responsible can be contacted
#not an emergency
question: Is there a *Person Responsible* that can be contacted?
subquestion: |
  A *Person Responsible* is defined by the following list, select any that are available:
fields:
  - no label: APNOperson_responsible
    datatype: checkboxes 
    choices: 
      - Guardian
      - Spouse/Domestic Partner
      - Family member by blood or marriage or adoption 
      - Adult friend
      - Adult charged with overseeing the day-to-day care of the person
  
#need to add the defintions of what the above mean (not sure how to do it yet)
#because they are more detailed in the legislation (like what defines an adult friend)

---
#this is a little table to record what the user inputs, however, i'm only using it to prompt the users through the flowchart questions for now.
mandatory: True
question: The answers
subquestion: |
  ### These are the answers we collected from you

  
  Thanks for completing our app.
  
  Information|Your Input
  -----------|----------
  Decision Making Ability | ${ APNOdecision }
  Delay | ${ APNOdelay }
  Advance Care Directive Decision Maker | ${ APNOACDdecision }
  Advance Care Directive Instruction | ${ APNOACDinstructions }
  Person Responsible | ${ APNOperson_responsible }
---
#this is the answer area, i am creating the yes or no endings for what the app user should do
question: 
  Result
subquestion: |
  In accordance to your selections, it is recommended that you
  **${ givetreatment }
  ${ notreatment }
  ${ somethingelse }**
  Thank you for using our app. 

#im going to note down all the potential finishes in order of the flow chart
#
#Decision making ability is impaired= continue
###This is triggered if they select anything that isn't 'None of the above'
#Decision making ability is not impaired= seek their consent
###This is triggered if they select 'None of the above'
#
#treatment cannot be delayed= continue
###This is triggered if they select 'NO'
#treatment can be delayed= delay untill they can consent
###This is triggered if they select 'YES'
#
#ACD does not set out a decision maker= continue
###This is triggered if they select 'NO'
#ACD does set out a substitute decision maker= seek their consent
###This is triggered if they select 'YES'
#
#ACD does not set out instruction= continue
###This is triggered if they select 'NO'
#ACD does set out instructions= follow those instructions
###This is triggered if they select 'YES'
#
#There is not a person responsible availible= administer treatment
###This is triggered if they select 'None of the above'
#There is a person responsible availible= seek their consent
###This is triggered if they select anything that isnt 'None of the above'


---
code: |
  if APNOdecision == 'none':
    TreatmentYN = 'Seek the patients consent'
  else:
    TreatmentYN = ': *This is where you put the title of the next question we need to ask*'
---
mandatory: false
question: Formalities
subquestion: | 
  From the questions you have answered, it is recommended that you ${ TreatmentYN }
---
